# `Cube` project template

`Cube` is a C project with a project structure (`Cube` project structure) aim to be modular,
in which `Cube` project could easily embedded into other `Cube` projects with 0 configuration.

What it is:

- Building desktop application and static library.
- Include other `Cube` projects as thirdparties with 0 configuration.
- Focus on modularity.

## `Cube` project structure

| Directory        | Description                                                                                                                                                                                           |
| ---------------- | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| `build`          | Store distributable files of the project and its thirdparty `Cube` projects.                                                                                                                          |
| `build/bin`      | Stores built binary of the project and its thirdparty `Cube` projects.                                                                                                                                |
| `build/includes` | Stores header files of the project and its thirdparty `Cube` projects. The header files is stored in their own directory named to its project's name (`build/includes/<PROJECT_NAME>/`).              |
| `cube`           | Stores all the thirdparty `Cube` projects. It is handled by the `Cube` makefile.                                                                                                                      |
| `gen`            | Stores the generated object files of the project.                                                                                                                                                     |
| `include`        | Stores the header files to be distributed, it will be copied to the `build/includes` directory.                                                                                                       |
| `source`         | Store all the `.c` source files.                                                                                                                                                                      |
| `source/bin`     | Stores source files that will be build into executables. Each source file compiles to an executable with the same name and output to `build/bin`. The executable is linked to library in `build/lib`. |
| `source/lib`     | Stores source files that will be build into a static library, output to `build/lib`.                                                                                                                  |

## `Cube` makefile

The `Cube` makefile resides at the root of the project. It should automatically handle compiling and linking of the project and its thirdparty `Cube` projects.
It should:

- Consider `release` and `debug` build.
- Output the distributed files to the root `build` directory (more on [`Cube` project structure](#cube-project-structure)).
- Clean the build.
- Tell the thirdparty `Cube` projects to do the same.

### Considering build

There will be two build, `release` build and `debug` build.
The `Cube` makefile should have the `release` phony target and the `debug` phony target for the build.

### Outputing distributed files

The root `build` directory is passed to sub-makefile with `export`, these are the accessible variables:

- `ROOT_BUILD_BIN_DIR`
- `ROOT_BUILD_INCLUDE_DIR`
- `ROOT_BUILD_LIB_DIR`

### Clean the build

The `Cube` makefile should have a `clean` phony target that delete the file generated _by itself only_ and _not the files generated by the thirdparty `Cube` projects or the parent `Cube` projects_.

### Compile thirdparty `Cube` projects

The `Cube` makefile should call `make` for building or cleaning on the thirdparty `Cube` projects living in the `cube` directory before building or cleaning itself.

## `Cube` porting makefile

`Cube` porting makefile is a makefile that is purposed to make non-`Cube` project to be able to act as a thirdparty `Cube` project. It is nearly the same as the `Cube` makefile which should do these:

- Consider `release` and `debug` build.
- Output the distributed files to the root `build` directory (more on [`Cube` project structure](#cube-project-structure)).
- Clean the build.

Since itself is not really a `Cube` project so handling thirdparty `Cube` projects is unnecessary.

## Cross-compiling

Since it is all makefiles, it captures from the environment variables. Cross-compiling isn't in the job scope of the `Cube` makefile, the programmer should install the appropriate build tools and setup the environment variables for cross-compiling.
